# API & SERVER
# ============================================================================
ANTHROPIC_API_KEY=your-anthropic-api-key-here

PORT=3000
NODE_ENV=development

# ============================================================================
# STORAGE BACKENDS
# ============================================================================
# Set to "s3" for AWS/MinIO or "local" to keep artifacts on disk.
STORAGE_BACKEND=s3
# Directory used when STORAGE_BACKEND=local (relative to project root)
LOCAL_STORAGE_DIR=./uploads/processed
# Processed artifacts bucket (structured outputs, manifests, transcripts)
S3_BUCKET=enterprise-lite-dev-processed
# Raw uploads bucket (ingested files). Defaults to S3_BUCKET when omitted.
S3_RAW_BUCKET=enterprise-lite-dev-raw
# AWS region for the buckets
S3_REGION=ap-southeast-1
# Optional custom endpoint for MinIO or LocalStack (leave blank for AWS)
S3_ENDPOINT=
# Force path-style URLs (true for MinIO/LocalStack, false for AWS)
S3_FORCE_PATH_STYLE=false
# Expiration (seconds) for signed download URLs
S3_SIGNED_URL_TTL=3600
# Enable if you rely on shared credentials file / SSO profile locally
AWS_PROFILE=sunway-dev

# ============================================================================
# FILE UPLOAD LIMITS
# ============================================================================
MAX_FILE_SIZE=10485760
MAX_FILES=10

# ============================================================================
# CLAUDE STANDARD (Text Chat)
# ============================================================================
CLAUDE_MODEL=claude-sonnet-4-20250514
CLAUDE_MAX_TOKENS=4096

# ============================================================================
# CLAUDE VISION (VLM) - CRITICAL SETTINGS
# ============================================================================

# Enable Vision
VISION_PDF_ENABLED=true
VISION_PDF_TOOL=process_pdf_with_vlm
VISION_ENABLED=true

# Model (use same as standard for consistency)
CLAUDE_VISION_MODEL=claude-sonnet-4-20250514

# MAX TOKENS - INCREASED FOR COMPLEX DOCUMENTS
# OLD: 1024 (too small, cuts off extraction)
# NEW: 16000 (handles large documents completely)
CLAUDE_VISION_MAX_TOKENS=16000

# TEMPERATURE - SET TO 0 FOR EXTRACTION
# OLD: 0.2 (adds randomness - bad for extraction)
# NEW: 0 (deterministic, consistent results)
CLAUDE_VISION_TEMPERATURE=0

# TOP_P - Full token consideration
CLAUDE_VISION_TOP_P=1.0

# PAGE SETTINGS - Optional (VLM handles any size automatically)
# Can remove these if not using specific rendering
VISION_PAGE_WIDTH=800
VISION_PAGE_HEIGHT=600

# ============================================================================
# VISION SYSTEM PROMPT - ULTIMATE UNIVERSAL PROMPT
# ============================================================================
# NOTE: This is simplified for .env. Full prompt should be in separate file.
# See: VISION_PROMPT_PATH below for recommended approach.
# ============================================================================

VISION_PROMPT_PATH=./config/prompts/vision-ultimate.txt
# ============================================================================
# RECOMMENDED: Use External Prompt File (Better than inline)
# ============================================================================
# Uncomment these and use external file instead of inline prompt above:
# VISION_PROMPT_PATH=./config/prompts/universal.txt
# VISION_USE_EXTERNAL_PROMPT=true

# ============================================================================
# CLAUDE THINK & CACHE (Optional)
# ============================================================================
CLAUDE_THINK_MODE=enabled
CLAUDE_CACHE_TYPE=ephemeral
CLAUDE_CACHE_TTL_SECONDS=3600

# ============================================================================
# OUTPUT SETTINGS
# ============================================================================
# Where to save parsed results
AUTO_SAVE_RESULTS=true
RESULTS_OUTPUT_PATH=./output/parsed

# Output format (always JSON from VLM, convert to other formats in code)
OUTPUT_FORMAT=json
PRETTY_PRINT=true

# ============================================================================
# ERROR HANDLING
# ============================================================================
MAX_RETRIES=3
RETRY_DELAY_MS=1000
ON_PARSE_FAILURE=return_partial

# ============================================================================
# LOGGING & DEBUGGING
# ============================================================================
LOG_LEVEL=info
DEBUG_API_CALLS=false

# Enable to see raw VLM responses (useful for debugging)
SAVE_RAW_RESPONSES=true
RAW_RESPONSES_PATH=./logs/raw-responses

# ============================================================================
# COST TRACKING
# ============================================================================
ENABLE_COST_TRACKING=true
COST_PER_1K_INPUT_TOKENS=0.003
COST_PER_1K_OUTPUT_TOKENS=0.015
